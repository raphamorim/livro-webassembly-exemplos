<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>Soma</title>
    <script type="module">
      fetch('soma.wasm')

      /*
       * Usando a interface Response (representa a resposta de um request) 
       * converte o conteudo do corpo da resposta para um ArrayBuffer de forma assíncrona.
       */
      .then(response => response.arrayBuffer())
      .then(bytes => {

        // Cria um módulo: objeto contendo código WebAssembly sem estado que já foi compilado pelo navegador.
        const modulo = new WebAssembly.Module(bytes);

        // Cria uma instancia usando o módulo.
        WebAssembly.instantiate(modulo).then(result => {
          console.log(result.exports.soma(1, 4))
        });
      });
    </script>
  </head>
  <body></body>
</html>